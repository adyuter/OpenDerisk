(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7537],{15531:function(e,l,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra/components/auto-plan",function(){return n(78174)}])},78174:function(e,l,n){"use strict";n.r(l);var a=n(85893),t=n(60778),s=n(25035),r=n(65654),u=n(84567),i=n(83062),d=n(99859),o=n(42075),c=n(93967),m=n.n(c),p=n(96486),v=n(67294),x=n(67421),g=n(83072),f=n(77451);let _=e=>{let{value:l,onChange:n,agents:t,selectedTab:r,setSelectedTab:d}=e;return(0,a.jsx)(u.Z.Group,{className:"grid grid-cols-4 gap-4",onChange:e=>{null==n||n(e)},value:l,children:t.map(e=>(0,a.jsxs)("div",{className:"flex grow h-8 items-center px-3 border ".concat(e.name===r?"border-[#0c75fc]":"border-[#d6d8da]"," rounded-md hover:border-[#0c75fc] cursor-pointer"),onClick:()=>{d(e.name||"")},children:[(0,a.jsx)(u.Z,{value:e.name}),(0,a.jsxs)("div",{className:"flex items-center flex-1 justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"ml-2 mr-1",children:g.agentIcon[e.name||""]}),(0,a.jsx)("span",{className:"text-sm text-[rgba(0,10,26,0.68)] dark:text-[rgba(255,255,255,0.85)]",children:e.label})]}),(0,a.jsx)(i.Z,{title:e.desc,children:(0,a.jsx)(s.Z,{className:"text-sm"})})]})]},e.name))})};l.default=e=>{var l,n,s;let{initValue:u,updateData:i,classNames:c}=e,{t:h,i18n:b}=(0,x.$G)(),[j]=d.Z.useForm(),N=d.Z.useWatch("agent_name",j),[w,Z]=(0,v.useState)(""),y=(0,v.useRef)([]),k="en"===b.language,{data:T,loading:V}=(0,r.Z)(async()=>{var e,l;let n=await Promise.all([(0,t.Vx)((0,t.j8)()),(0,t.Vx)((0,t.Vd)()),(0,t.Vx)((0,t.Q5)())]),[,a]=(null==n?void 0:n[0])||[];return y.current=(null==a?void 0:a.map(e=>({agent_name:e.name,llm_strategy:"",llm_strategy_value:"",prompt_template:"",resources:[]})))||[],j.setFieldsValue({agent_name:null==u?void 0:u.map(e=>e.agent_name)}),Z((null===(e=null==u?void 0:u.map(e=>e.agent_name))||void 0===e?void 0:e[0])||(null==a?void 0:null===(l=a[0])||void 0===l?void 0:l.name)||""),null!=n?n:[]}),{data:C}=(0,r.Z)(async()=>{let[,e]=await (0,t.Vx)((0,t.xA)({page:1,page_size:1e5}));return null!=e?e:{items:[]}}),E=(0,v.useMemo)(()=>{let[,e]=(null==T?void 0:T[1])||[];return(null==e?void 0:e.length)?e.map(e=>({label:k?e.name:e.name_cn,value:e.value})):[]},[T]),I=(0,v.useMemo)(()=>{let[,e]=(null==T?void 0:T[2])||[];if(null==e?void 0:e.length){let l=e.map(e=>({label:(0,a.jsxs)(o.Z,{children:[g.resourceTypeIcon[e],e]}),value:e}));return(0,p.concat)([{label:(0,a.jsxs)("div",{className:"flex items-center text-sm",children:[g.resourceTypeIcon.all,(0,a.jsx)("span",{className:"ml-2 text-[rgba(0,10,26,0.68)] dark:text-[#ffffffD9]",children:h("All")})]}),value:"all"}],l)}return[]},[T]);return(0,v.useEffect)(()=>{i([V,y.current.filter(e=>null==N?void 0:N.includes(e.agent_name))])},[V,N,i]),(0,a.jsxs)("div",{className:m()(c),children:[(0,a.jsx)(d.Z,{form:j,style:{width:"100%"},labelCol:{span:4},wrapperCol:{span:20},children:(0,a.jsx)(d.Z.Item,{label:"".concat(h("choose")," agent"),name:"agent_name",required:!0,rules:[{required:!0,message:h("please_choose")+" agent"}],children:(0,a.jsx)(_,{agents:(null==T?void 0:null===(l=T[0])||void 0===l?void 0:l[1])||[],selectedTab:w,setSelectedTab:Z})})}),null==T?void 0:null===(n=T[0])||void 0===n?void 0:null===(s=n[1])||void 0===s?void 0:s.map(e=>(0,a.jsx)(f.default,{classNames:e.name===w?"block":"hidden",updateData:e=>{y.current=y.current.map(l=>l.agent_name===(null==e?void 0:e.agent_name)?{...l,...e}:{...l}),i([V,y.current.filter(e=>null==N?void 0:N.includes(e.agent_name))])},initValue:u,name:e.name,modelStrategyOptions:E,resourceTypeOptions:I,promptList:(null==C?void 0:C.items)||[]},e.name))]})}}},function(e){e.O(0,[3662,1265,7034,1449,8289,3791,5217,4330,8791,5593,3886,4435,6877,8591,9859,4567,2398,1004,5265,7426,3627,4866,9685,7327,6520,5789,8051,7451,9774,2888,179],function(){return e(e.s=15531)}),_N_E=e.O()}]);