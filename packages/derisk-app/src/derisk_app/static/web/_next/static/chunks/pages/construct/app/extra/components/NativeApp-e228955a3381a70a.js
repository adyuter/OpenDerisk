(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3394],{33507:function(e,l){"use strict";l.Z=e=>({[e.componentCls]:{[`${e.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}},[`${e.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${e.motionDurationMid} ${e.motionEaseInOut},
        opacity ${e.motionDurationMid} ${e.motionEaseInOut} !important`}}})},58264:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra/components/NativeApp",function(){return t(76054)}])},76054:function(e,l,t){"use strict";t.r(l);var a=t(85893),n=t(60778),o=t(48218),i=t(65654),s=t(99859),d=t(83062),u=t(65217),r=t(24435),c=t(93967),p=t.n(c),m=t(67294),v=t(67421),_=t(23024);l.default=e=>{var l,t;let{classNames:c,initValue:h,updateData:f}=e,{t:x}=(0,v.$G)(),[w]=s.Z.useForm(),y=s.Z.useWatch("chat_scene",w),j=s.Z.useWatch("bind_value",w),Z=s.Z.useWatch("model",w),b=s.Z.useWatch("temperature",w),N=s.Z.useWatch("max_new_tokens",w),g=s.Z.useWatch("prompt_template",w),{team_context:k,param_need:C}=h||{},{data:E,loading:V}=(0,i.Z)(async()=>{var e,l,t,a,o;let i=await Promise.all([(0,n.Vx)((0,n.tM)()),(0,n.Vx)((0,n.m9)("priority"))]),[s,d]=i;return w.setFieldValue("chat_scene",null==k?void 0:k.chat_scene),w.setFieldValue("model",null===(e=null==C?void 0:C.find(e=>"model"===e.type))||void 0===e?void 0:e.value),w.setFieldValue("temperature",null===(l=null==C?void 0:C.find(e=>"temperature"===e.type))||void 0===l?void 0:l.value),w.setFieldValue("max_new_tokens",null===(t=null==C?void 0:C.find(e=>"max_new_tokens"===e.type))||void 0===t?void 0:t.value),w.setFieldValue("prompt_template",null===(a=null==C?void 0:C.find(e=>"prompt_template"===e.type))||void 0===a?void 0:a.value),await M((null===(o=null==C?void 0:C.find(e=>"resource"===e.type))||void 0===o?void 0:o.value)||""),[s,d]}),{data:$}=(0,i.Z)(async()=>{let[,e]=await (0,n.Vx)((0,n.xA)({page:1,page_size:1e5}));return null!=e?e:{items:[]}}),{data:I,loading:F,run:M}=(0,i.Z)(async e=>{var l,t,a;let[,o]=await (0,n.Vx)((0,n.RX)({type:e}));return y===(null==k?void 0:k.chat_scene)&&(null===(l=null==C?void 0:C.find(e=>"resource"===e.type))||void 0===l?void 0:l.bind_value)&&w.setFieldsValue({bind_value:null===(t=null==C?void 0:C.find(e=>"resource"===e.type))||void 0===t?void 0:t.bind_value}),null!==(a=null==o?void 0:o.map(e=>({...e,value:e.key})))&&void 0!==a?a:[]},{manual:!0}),O=(0,m.useMemo)(()=>{var e;let l=null==E?void 0:null===(e=E[0])||void 0===e?void 0:e[1];return(null==l?void 0:l.map(e=>{var l;return{...e,label:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(o.Z,{width:4,height:4,scene:e.chat_scene}),(0,a.jsx)(d.Z,{title:"资源类型".concat(null===(l=e.param_need.find(e=>"resource"===e.type))||void 0===l?void 0:l.value),children:(0,a.jsx)("span",{className:"text-[#525964] dark:text-[rgba(255,255,255,0.65)]  ml-1",children:e.scene_name})})]}),value:e.chat_scene}}))||[]},[E]);return(0,m.useEffect)(()=>{var e,l,t,a;let n=w.getFieldsValue();f([V,[{chat_scene:n.chat_scene,scene_name:null===(e=O.find(e=>e.chat_scene===n.chat_scene))||void 0===e?void 0:e.scene_name},[{type:"model",value:n.model},{type:"temperature",value:n.temperature},{type:"max_new_tokens",value:n.max_new_tokens},{type:"resource",value:null===(l=null===(t=O.find(e=>e.chat_scene===n.chat_scene))||void 0===t?void 0:null===(a=t.param_need)||void 0===a?void 0:a.find(e=>"resource"===e.type))||void 0===l?void 0:l.value,bind_value:n.bind_value},{type:"prompt_template",value:n.prompt_template}]]])},[w,y,j,Z,b,N,g,f,O,V]),(0,m.useEffect)(()=>{var e,l,t,a,n;let o=null===(e=null===(l=null==E?void 0:null===(t=E[0])||void 0===t?void 0:null===(a=t[1])||void 0===a?void 0:a.find(e=>e.chat_scene===y))||void 0===l?void 0:null===(n=l.param_need)||void 0===n?void 0:n.find(e=>"resource"===e.type))||void 0===e?void 0:e.value;M(o||"")},[y,E,M]),(0,a.jsx)("div",{className:p()(c),children:(0,a.jsxs)(s.Z,{form:w,autoComplete:"off",style:{width:"100%"},labelCol:{span:3},wrapperCol:{span:21},children:[(0,a.jsx)(s.Z.Item,{label:x("native_type"),tooltip:!0,name:"chat_scene",children:(0,a.jsx)(u.default,{className:"w-1/2",options:O,placeholder:x("app_type_select"),onChange:()=>w.setFieldsValue({bind_value:void 0})})}),"chat_excel"!==y&&(0,a.jsx)(s.Z.Item,{label:x("Arguments"),name:"bind_value",children:(0,a.jsx)(u.default,{placeholder:x("please_select_param"),allowClear:!0,className:"w-1/2",options:I,loading:F})}),(0,a.jsx)(s.Z.Item,{label:x("model"),tooltip:!0,name:"model",children:(0,a.jsx)(u.default,{placeholder:x("please_select_model"),allowClear:!0,options:null==E?void 0:null===(l=E[1])||void 0===l?void 0:null===(t=l[1])||void 0===t?void 0:t.map(e=>({label:e,value:e})),className:"w-1/2"})}),(0,a.jsx)(s.Z.Item,{label:x("prompt"),name:"prompt_template",children:(0,a.jsx)(_.default,{promptList:(null==$?void 0:$.items)||[]})}),(0,a.jsx)(s.Z.Item,{label:x("temperature"),tooltip:!0,name:"temperature",children:(0,a.jsx)(r.Z,{className:"w-1/5 h-8",max:1,min:0,step:.1,placeholder:x("please_input_temperature")})}),(0,a.jsx)(s.Z.Item,{label:x("max_new_tokens"),tooltip:!0,name:"max_new_tokens",children:(0,a.jsx)(r.Z,{className:"w-1/5 h-8",min:1,placeholder:x("please_input_max_new_tokens")})})]})})}},23024:function(e,l,t){"use strict";t.r(l);var a=t(85893),n=t(18102),o=t(11475),i=t(65217),s=t(85576),d=t(67294);l.default=e=>{let{value:l,onChange:t,promptList:u}=e,[r,c]=(0,d.useState)(!1),[p,m]=(0,d.useState)();return(0,d.useEffect)(()=>{if(l){let e=null==u?void 0:u.filter(e=>e.prompt_code===l)[0];m(e)}},[u,l]),(0,a.jsxs)("div",{className:"w-2/5 flex items-center gap-2",children:[(0,a.jsx)(i.default,{className:"w-1/2",placeholder:"select prompt",options:u,fieldNames:{label:"prompt_name",value:"prompt_code"},onChange:e=>{let l=null==u?void 0:u.filter(l=>l.prompt_code===e)[0];m(l),null==t||t(e)},value:l,allowClear:!0,showSearch:!0}),p&&(0,a.jsxs)("span",{className:"text-sm text-blue-500 cursor-pointer",onClick:()=>c(!0),children:[(0,a.jsx)(o.Z,{className:"mr-1"}),"查看详情"]}),(0,a.jsx)(s.default,{title:"Prompt",open:r,footer:!1,width:"60%",onCancel:()=>c(!1),children:(0,a.jsx)(n.default,{children:null==p?void 0:p.content})})]})}}},function(e){e.O(0,[3662,1265,7034,1449,8289,3791,5217,4330,8791,5593,3886,4435,6877,8591,9859,4567,2398,1004,5265,7426,3627,4866,9685,6520,5789,8051,9774,2888,179],function(){return e(e.s=58264)}),_N_E=e.O()}]);