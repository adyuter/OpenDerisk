(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[516],{3089:function(e,l,a){"use strict";a.d(l,{Z:function(){return i}});var t=a(87462),n=a(67294),s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},r=a(84089),i=n.forwardRef(function(e,l){return n.createElement(r.Z,(0,t.Z)({},e,{ref:l,icon:s}))})},74294:function(e,l,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra",function(){return a(90334)}])},37082:function(e,l,a){"use strict";a.r(l);var t=a(85893),n=a(60778),s=a(65654),r=a(36447),i=a(99859),o=a(21532),d=a(85576),u=a(74330),c=a(38289),m=a(96074),p=a(93967),v=a.n(p),x=a(25675),_=a.n(x),f=a(11163),h=a(67294),g=a(67421),b=a(79903),j=a.n(b);let w=e=>{let{disable:l=!1,options:a=[],value:n,onChange:s}=e,[r,i]=(0,h.useState)(n||{}),{i18n:o}=(0,g.$G)(),d=e=>l?v()("flex items-center p-4 border rounded-lg border-[#d9d9d9]  cursor-not-allowed relative transition-all duration-500 ease-in-out",{"bg-[rgba(0,0,0,0.04)] dark:bg-[#606264]":e.value===(null==r?void 0:r.value)}):"flex items-center p-4  border dark:border-[rgba(217,217,217,0.85)] rounded-lg cursor-pointer hover:border-[#0c75fc] hover:bg-[#f5faff] dark:hover:border-[rgba(12,117,252,0.85)] dark:hover:bg-[#606264] relative transition-all duration-300 ease-in-out ".concat(e.value===(null==r?void 0:r.value)?"border-[#0c75fc] bg-[#f5faff] dark:bg-[#606264] dark:border-[#0c75fc]":"border-[#d9d9d9]"," "),u="en"===o.language;return(0,t.jsx)("div",{className:"grid grid-cols-2 gap-4",children:a.map(e=>(0,t.jsxs)("div",{className:d(e),onClick:()=>{l||(i(e),null==s||s({...n,...e}))},children:[(0,t.jsx)(_(),{src:"/icons/app/".concat(e.value,".png"),width:48,height:48,alt:e.value}),(0,t.jsxs)("div",{className:"flex flex-col ml-3",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-[rgba(0,0,0,0.85)] dark:text-[rgba(255,255,255,0.85)] first-line:leading-6",children:u?e.name_en:e.name_cn}),(0,t.jsx)("span",{className:"text-xs text-[rgba(0,0,0,0.45)] dark:text-[rgba(255,255,255,0.85)]",children:u?e.description_en:e.description})]}),e.value===(null==r?void 0:r.value)&&(0,t.jsx)("div",{className:"w-3 h-3 rounded-tr-md absolute top-[1px] right-[1px] transition-all duration-300 ease-in-out",style:{background:"linear-gradient(to right top, transparent 50%, transparent 50%, ".concat(l?"#d0d0d0":"#0c75fc"," 0)")}})]},e.value))})};l.default=e=>{let{open:l,onCancel:a,type:p="add",refresh:v}=e,{t:x,i18n:_}=(0,g.$G)(),b=JSON.parse(localStorage.getItem("new_app_info")||"{}"),{message:Z}=r.Z.useApp(),[y]=i.Z.useForm(),N=i.Z.useWatch("team_mode",y),k=(0,f.useRouter)(),C="en"===_.language,{data:V,loading:q}=(0,s.Z)(async()=>{let[e,l]=await (0,n.Vx)((0,n.lz)());return null!=l?l:[]}),{run:I,loading:S}=(0,s.Z)(async e=>"edit"===p?await (0,n.Vx)((0,n.KT)({app_code:null==b?void 0:b.app_code,language:"zh",...e})):await (0,n.Vx)((0,n.L5)({language:"zh",...e})),{manual:!0,onSuccess:async e=>{let[l,t]=e;if(l)Z.error("edit"===p?x("Update_failure"):x("Create_failure"));else if("edit"===p){var s;let[,e]=await (0,n.Vx)((0,n.yk)({})),l=null==e?void 0:null===(s=e.app_list)||void 0===s?void 0:s.find(e=>e.app_code===(null==b?void 0:b.app_code));localStorage.setItem("new_app_info",JSON.stringify({...l,isEdit:!0})),Z.success(x("Update_successfully"))}else Z.success(x("Create_successfully")),localStorage.setItem("new_app_info",JSON.stringify(t)),k.push("/construct/app/extra");await (null==v?void 0:v()),a()}}),E=(0,h.useMemo)(()=>{var e;return null===(e=null==V?void 0:V.filter(e=>e.value===(null==b?void 0:b.team_mode)))||void 0===e?void 0:e[0]},[b,V]);return q?null:(0,t.jsx)(o.ZP,{theme:{components:{Button:{defaultBorderColor:"#d9d9d9"}}},children:(0,t.jsx)(d.default,{className:j()["create-app-modal-container"],title:x("create_app"),width:900,open:l,onOk:async()=>{y.validateFields().then(async e=>{var l;await I({app_name:null==e?void 0:e.app_name,app_describe:null==e?void 0:e.app_describe,team_mode:null==e?void 0:null===(l=e.team_mode)||void 0===l?void 0:l.value})})},onCancel:a,centered:!0,children:(0,t.jsx)(u.Z,{spinning:S,children:(0,t.jsxs)("div",{className:"flex flex-1",children:[(0,t.jsxs)(i.Z,{layout:"vertical",className:"w-3/5",form:y,initialValues:{team_mode:E||(null==V?void 0:V[0]),app_name:null==b?void 0:b.app_name,app_describe:null==b?void 0:b.app_describe},children:[(0,t.jsx)(i.Z.Item,{label:x("team_modal"),name:"team_mode",required:!0,rules:[{required:!0,message:x("Please_input_the_work_modal")}],children:(0,t.jsx)(w,{disable:"edit"===p,options:V||[]})}),(0,t.jsx)(i.Z.Item,{label:"".concat(x("app_name"),"："),name:"app_name",required:!0,rules:[{required:!0,message:x("input_app_name")}],children:(0,t.jsx)(c.default,{placeholder:x("input_app_name"),autoComplete:"off",className:"h-8"})}),(0,t.jsx)(i.Z.Item,{label:"".concat(x("Description"),"："),name:"app_describe",required:!0,rules:[{required:!0,message:x("Please_input_the_description")}],children:(0,t.jsx)(c.default.TextArea,{autoComplete:"off",placeholder:x("Please_input_the_description"),autoSize:{minRows:2.5}})})]}),(0,t.jsx)(m.Z,{type:"vertical",className:"h-auto mx-6 bg-[rgba(0,0,0,0.06)] dark:bg-[rgba(255,255,255,0.5)] "}),(0,t.jsxs)("div",{className:"flex flex-col w-2/5 pl-6 pt-8 ",children:[(0,t.jsx)("span",{className:"text-base text-[rgba(0,0,0,0.85)] font-medium mb-6 dark:text-[rgba(255,255,255,0.85)]",children:C?null==N?void 0:N.name_en:null==N?void 0:N.name_cn}),(0,t.jsxs)("div",{className:"flex items-start",children:[(0,t.jsx)("span",{className:"flex flex-shrink-0 w-1 h-1 rounded-full bg-[rgba(0,0,0,0.45)] mt-2 mr-1 dark:bg-[rgba(255,255,255,0.65)]"}),(0,t.jsx)("span",{className:"text-xs leading-5 text-[rgba(0,0,0,0.45)] dark:text-[rgba(255,255,255,0.65)]",children:C?null==N?void 0:N.remark_en:null==N?void 0:N.remark})]})]})]})})})})}},91183:function(e,l,a){"use strict";a.r(l),a.d(l,{default:function(){return f}});var t=a(85893),n=a(60778);let s=e=>{let{nodes:l,edges:a,...t}=e,n=l.map(e=>{let{position_absolute:l,...a}=e;return{positionAbsolute:l,...a}}),s=a.map(e=>{let{source_handle:l,target_handle:a,...t}=e;return{sourceHandle:l,targetHandle:a,...t}});return{nodes:n,edges:s,...t}};var r=a(67294),i=a(36851),o=a(59819);a(4583);var d=e=>{let{id:l,sourceX:a,sourceY:n,targetX:s,targetY:r,sourcePosition:o,targetPosition:d,style:u={},markerEnd:c}=e,[m,p,v]=(0,i.OQ)({sourceX:a,sourceY:n,sourcePosition:o,targetX:s,targetY:r,targetPosition:d}),x=(0,i._K)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.u5,{id:l,style:u,path:m,markerEnd:c}),(0,t.jsx)("foreignObject",{width:40,height:40,x:p-20,y:v-20,className:"bg-transparent w-10 h-10 relative",requiredExtensions:"http://www.w3.org/1999/xhtml",children:(0,t.jsx)("button",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-5 h-5 rounded-full bg-stone-400 dark:bg-zinc-700 cursor-pointer text-sm",onClick:e=>{e.stopPropagation(),x.setEdges(x.getEdges().filter(e=>e.id!==l))},children:"\xd7"})})]})},u=e=>{let{flowData:l,minZoom:a}=e,n=s(l);return(0,t.jsx)(i.x$,{nodes:n.nodes,edges:n.edges,edgeTypes:{buttonedge:d},fitView:!0,minZoom:a||.1,children:(0,t.jsx)(o.A,{color:"#aaa",gap:16})})},c=a(65654),m=a(99859),p=a(65217),v=a(93967),x=a.n(v),_=a(67421),f=e=>{let{initValue:l,updateData:a,classNames:s}=e,{t:i}=(0,_.$G)(),[o]=m.Z.useForm(),d=m.Z.useWatch("flow",o),{data:v,loading:f}=(0,c.Z)(async()=>{let[,e]=await (0,n.Vx)((0,n.Wf)({page:1,page_size:1e4}));return o.setFieldsValue({flow:null==l?void 0:l.name}),null!=e?e:{}}),h=(0,r.useMemo)(()=>{var e;return(null==v?void 0:null===(e=v.items)||void 0===e?void 0:e.map(e=>({label:e.label,value:e.name})))||[]},[v]),g=(0,r.useMemo)(()=>{var e,l;return null===(e=null==v?void 0:null===(l=v.items)||void 0===l?void 0:l.find(e=>e.name===d))||void 0===e?void 0:e.flow_data},[null==v?void 0:v.items,d]);return(0,r.useEffect)(()=>{var e;a([f,null==v?void 0:null===(e=v.items)||void 0===e?void 0:e.find(e=>e.name===d)])},[null==v?void 0:v.items,d,f,a]),(0,t.jsx)("div",{className:x()(s,"mb-6"),children:(0,t.jsxs)(m.Z,{form:o,style:{width:"100%"},children:[(0,t.jsx)(m.Z.Item,{label:i("select_workflow"),name:"flow",children:(0,t.jsx)(p.default,{className:"w-1/4",placeholder:i("please_select_workflow"),options:h,allowClear:!0})}),g&&(0,t.jsx)("div",{className:"w-full h-[600px] mx-auto border-[0.5px] border-dark-gray",children:(0,t.jsx)(u,{flowData:g})})]})})}},76054:function(e,l,a){"use strict";a.r(l);var t=a(85893),n=a(60778),s=a(48218),r=a(65654),i=a(99859),o=a(83062),d=a(65217),u=a(24435),c=a(93967),m=a.n(c),p=a(67294),v=a(67421),x=a(23024);l.default=e=>{var l,a;let{classNames:c,initValue:_,updateData:f}=e,{t:h}=(0,v.$G)(),[g]=i.Z.useForm(),b=i.Z.useWatch("chat_scene",g),j=i.Z.useWatch("bind_value",g),w=i.Z.useWatch("model",g),Z=i.Z.useWatch("temperature",g),y=i.Z.useWatch("max_new_tokens",g),N=i.Z.useWatch("prompt_template",g),{team_context:k,param_need:C}=_||{},{data:V,loading:q}=(0,r.Z)(async()=>{var e,l,a,t,s;let r=await Promise.all([(0,n.Vx)((0,n.tM)()),(0,n.Vx)((0,n.m9)("priority"))]),[i,o]=r;return g.setFieldValue("chat_scene",null==k?void 0:k.chat_scene),g.setFieldValue("model",null===(e=null==C?void 0:C.find(e=>"model"===e.type))||void 0===e?void 0:e.value),g.setFieldValue("temperature",null===(l=null==C?void 0:C.find(e=>"temperature"===e.type))||void 0===l?void 0:l.value),g.setFieldValue("max_new_tokens",null===(a=null==C?void 0:C.find(e=>"max_new_tokens"===e.type))||void 0===a?void 0:a.value),g.setFieldValue("prompt_template",null===(t=null==C?void 0:C.find(e=>"prompt_template"===e.type))||void 0===t?void 0:t.value),await F((null===(s=null==C?void 0:C.find(e=>"resource"===e.type))||void 0===s?void 0:s.value)||""),[i,o]}),{data:I}=(0,r.Z)(async()=>{let[,e]=await (0,n.Vx)((0,n.xA)({page:1,page_size:1e5}));return null!=e?e:{items:[]}}),{data:S,loading:E,run:F}=(0,r.Z)(async e=>{var l,a,t;let[,s]=await (0,n.Vx)((0,n.RX)({type:e}));return b===(null==k?void 0:k.chat_scene)&&(null===(l=null==C?void 0:C.find(e=>"resource"===e.type))||void 0===l?void 0:l.bind_value)&&g.setFieldsValue({bind_value:null===(a=null==C?void 0:C.find(e=>"resource"===e.type))||void 0===a?void 0:a.bind_value}),null!==(t=null==s?void 0:s.map(e=>({...e,value:e.key})))&&void 0!==t?t:[]},{manual:!0}),O=(0,p.useMemo)(()=>{var e;let l=null==V?void 0:null===(e=V[0])||void 0===e?void 0:e[1];return(null==l?void 0:l.map(e=>{var l;return{...e,label:(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(s.Z,{width:4,height:4,scene:e.chat_scene}),(0,t.jsx)(o.Z,{title:"资源类型".concat(null===(l=e.param_need.find(e=>"resource"===e.type))||void 0===l?void 0:l.value),children:(0,t.jsx)("span",{className:"text-[#525964] dark:text-[rgba(255,255,255,0.65)]  ml-1",children:e.scene_name})})]}),value:e.chat_scene}}))||[]},[V]);return(0,p.useEffect)(()=>{var e,l,a,t;let n=g.getFieldsValue();f([q,[{chat_scene:n.chat_scene,scene_name:null===(e=O.find(e=>e.chat_scene===n.chat_scene))||void 0===e?void 0:e.scene_name},[{type:"model",value:n.model},{type:"temperature",value:n.temperature},{type:"max_new_tokens",value:n.max_new_tokens},{type:"resource",value:null===(l=null===(a=O.find(e=>e.chat_scene===n.chat_scene))||void 0===a?void 0:null===(t=a.param_need)||void 0===t?void 0:t.find(e=>"resource"===e.type))||void 0===l?void 0:l.value,bind_value:n.bind_value},{type:"prompt_template",value:n.prompt_template}]]])},[g,b,j,w,Z,y,N,f,O,q]),(0,p.useEffect)(()=>{var e,l,a,t,n;let s=null===(e=null===(l=null==V?void 0:null===(a=V[0])||void 0===a?void 0:null===(t=a[1])||void 0===t?void 0:t.find(e=>e.chat_scene===b))||void 0===l?void 0:null===(n=l.param_need)||void 0===n?void 0:n.find(e=>"resource"===e.type))||void 0===e?void 0:e.value;F(s||"")},[b,V,F]),(0,t.jsx)("div",{className:m()(c),children:(0,t.jsxs)(i.Z,{form:g,autoComplete:"off",style:{width:"100%"},labelCol:{span:3},wrapperCol:{span:21},children:[(0,t.jsx)(i.Z.Item,{label:h("native_type"),tooltip:!0,name:"chat_scene",children:(0,t.jsx)(d.default,{className:"w-1/2",options:O,placeholder:h("app_type_select"),onChange:()=>g.setFieldsValue({bind_value:void 0})})}),"chat_excel"!==b&&(0,t.jsx)(i.Z.Item,{label:h("Arguments"),name:"bind_value",children:(0,t.jsx)(d.default,{placeholder:h("please_select_param"),allowClear:!0,className:"w-1/2",options:S,loading:E})}),(0,t.jsx)(i.Z.Item,{label:h("model"),tooltip:!0,name:"model",children:(0,t.jsx)(d.default,{placeholder:h("please_select_model"),allowClear:!0,options:null==V?void 0:null===(l=V[1])||void 0===l?void 0:null===(a=l[1])||void 0===a?void 0:a.map(e=>({label:e,value:e})),className:"w-1/2"})}),(0,t.jsx)(i.Z.Item,{label:h("prompt"),name:"prompt_template",children:(0,t.jsx)(x.default,{promptList:(null==I?void 0:I.items)||[]})}),(0,t.jsx)(i.Z.Item,{label:h("temperature"),tooltip:!0,name:"temperature",children:(0,t.jsx)(u.Z,{className:"w-1/5 h-8",max:1,min:0,step:.1,placeholder:h("please_input_temperature")})}),(0,t.jsx)(i.Z.Item,{label:h("max_new_tokens"),tooltip:!0,name:"max_new_tokens",children:(0,t.jsx)(u.Z,{className:"w-1/5 h-8",min:1,placeholder:h("please_input_max_new_tokens")})})]})})}},82257:function(e,l,a){"use strict";a.r(l);var t=a(85893),n=a(3089),s=a(24969),r=a(99859),i=a(38289),o=a(72269),d=a(77683),u=a(93967),c=a.n(u),m=a(67294),p=a(67421),v=a(11118),x=a.n(v);l.default=e=>{let{initValue:l,updateData:a,classNames:u,formStyle:v,labelCol:_=!0}=e,{t:f}=(0,p.$G)(),[h]=r.Z.useForm(),g=r.Z.useWatch("recommend_questions",h);return(0,m.useEffect)(()=>{a(null==g?void 0:g.filter(e=>!!e.question))},[g,a]),(0,t.jsx)("div",{className:c()(x()["recommend-questions-container"],u),children:(0,t.jsx)(r.Z,{style:{width:"100%"},form:h,initialValues:{recommend_questions:l||[{question:"",valid:!1}]},autoComplete:"off",wrapperCol:{span:20},..._&&{labelCol:{span:4}},children:(0,t.jsx)(r.Z.Item,{label:f("recommended_questions"),children:(0,t.jsx)(r.Z.List,{name:"recommend_questions",children:(e,l)=>{let{add:a,remove:u}=l;return(0,t.jsxs)(t.Fragment,{children:[e.map((e,l)=>{var a;let{key:s,name:d}=e;return(0,t.jsxs)("div",{className:c()("flex flex-1 items-center gap-8 mb-6",v),children:[(0,t.jsx)(r.Z.Item,{label:"".concat(f("question")," ").concat(l+1),name:[d,"question"],className:"grow",children:(0,t.jsx)(i.default,{placeholder:f("please_input_recommended_questions")})}),(0,t.jsx)(r.Z.Item,{label:f("is_effective"),name:[d,"valid"],children:(0,t.jsx)(o.Z,{style:{background:(null==g?void 0:null===(a=g[l])||void 0===a?void 0:a.valid)?"#1677ff":"#ccc"}})}),(0,t.jsx)(r.Z.Item,{children:(0,t.jsx)(n.Z,{onClick:()=>{u(d)}})})]},s)}),(0,t.jsx)(r.Z.Item,{className:c()(v),children:(0,t.jsx)(d.ZP,{type:"dashed",onClick:()=>{a({question:"",valid:!1})},block:!0,icon:(0,t.jsx)(s.Z,{}),children:f("add_question")})})]})}})})})})}},23024:function(e,l,a){"use strict";a.r(l);var t=a(85893),n=a(18102),s=a(11475),r=a(65217),i=a(85576),o=a(67294);l.default=e=>{let{value:l,onChange:a,promptList:d}=e,[u,c]=(0,o.useState)(!1),[m,p]=(0,o.useState)();return(0,o.useEffect)(()=>{if(l){let e=null==d?void 0:d.filter(e=>e.prompt_code===l)[0];p(e)}},[d,l]),(0,t.jsxs)("div",{className:"w-2/5 flex items-center gap-2",children:[(0,t.jsx)(r.default,{className:"w-1/2",placeholder:"select prompt",options:d,fieldNames:{label:"prompt_name",value:"prompt_code"},onChange:e=>{let l=null==d?void 0:d.filter(l=>l.prompt_code===e)[0];p(l),null==a||a(e)},value:l,allowClear:!0,showSearch:!0}),m&&(0,t.jsxs)("span",{className:"text-sm text-blue-500 cursor-pointer",onClick:()=>c(!0),children:[(0,t.jsx)(s.Z,{className:"mr-1"}),"查看详情"]}),(0,t.jsx)(i.default,{title:"Prompt",open:u,footer:!1,width:"60%",onCancel:()=>c(!1),children:(0,t.jsx)(n.default,{children:null==m?void 0:m.content})})]})}},78174:function(e,l,a){"use strict";a.r(l);var t=a(85893),n=a(60778),s=a(25035),r=a(65654),i=a(84567),o=a(83062),d=a(99859),u=a(42075),c=a(93967),m=a.n(c),p=a(96486),v=a(67294),x=a(67421),_=a(83072),f=a(77451);let h=e=>{let{value:l,onChange:a,agents:n,selectedTab:r,setSelectedTab:d}=e;return(0,t.jsx)(i.Z.Group,{className:"grid grid-cols-4 gap-4",onChange:e=>{null==a||a(e)},value:l,children:n.map(e=>(0,t.jsxs)("div",{className:"flex grow h-8 items-center px-3 border ".concat(e.name===r?"border-[#0c75fc]":"border-[#d6d8da]"," rounded-md hover:border-[#0c75fc] cursor-pointer"),onClick:()=>{d(e.name||"")},children:[(0,t.jsx)(i.Z,{value:e.name}),(0,t.jsxs)("div",{className:"flex items-center flex-1 justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"ml-2 mr-1",children:_.agentIcon[e.name||""]}),(0,t.jsx)("span",{className:"text-sm text-[rgba(0,10,26,0.68)] dark:text-[rgba(255,255,255,0.85)]",children:e.label})]}),(0,t.jsx)(o.Z,{title:e.desc,children:(0,t.jsx)(s.Z,{className:"text-sm"})})]})]},e.name))})};l.default=e=>{var l,a,s;let{initValue:i,updateData:o,classNames:c}=e,{t:g,i18n:b}=(0,x.$G)(),[j]=d.Z.useForm(),w=d.Z.useWatch("agent_name",j),[Z,y]=(0,v.useState)(""),N=(0,v.useRef)([]),k="en"===b.language,{data:C,loading:V}=(0,r.Z)(async()=>{var e,l;let a=await Promise.all([(0,n.Vx)((0,n.j8)()),(0,n.Vx)((0,n.Vd)()),(0,n.Vx)((0,n.Q5)())]),[,t]=(null==a?void 0:a[0])||[];return N.current=(null==t?void 0:t.map(e=>({agent_name:e.name,llm_strategy:"",llm_strategy_value:"",prompt_template:"",resources:[]})))||[],j.setFieldsValue({agent_name:null==i?void 0:i.map(e=>e.agent_name)}),y((null===(e=null==i?void 0:i.map(e=>e.agent_name))||void 0===e?void 0:e[0])||(null==t?void 0:null===(l=t[0])||void 0===l?void 0:l.name)||""),null!=a?a:[]}),{data:q}=(0,r.Z)(async()=>{let[,e]=await (0,n.Vx)((0,n.xA)({page:1,page_size:1e5}));return null!=e?e:{items:[]}}),I=(0,v.useMemo)(()=>{let[,e]=(null==C?void 0:C[1])||[];return(null==e?void 0:e.length)?e.map(e=>({label:k?e.name:e.name_cn,value:e.value})):[]},[C]),S=(0,v.useMemo)(()=>{let[,e]=(null==C?void 0:C[2])||[];if(null==e?void 0:e.length){let l=e.map(e=>({label:(0,t.jsxs)(u.Z,{children:[_.resourceTypeIcon[e],e]}),value:e}));return(0,p.concat)([{label:(0,t.jsxs)("div",{className:"flex items-center text-sm",children:[_.resourceTypeIcon.all,(0,t.jsx)("span",{className:"ml-2 text-[rgba(0,10,26,0.68)] dark:text-[#ffffffD9]",children:g("All")})]}),value:"all"}],l)}return[]},[C]);return(0,v.useEffect)(()=>{o([V,N.current.filter(e=>null==w?void 0:w.includes(e.agent_name))])},[V,w,o]),(0,t.jsxs)("div",{className:m()(c),children:[(0,t.jsx)(d.Z,{form:j,style:{width:"100%"},labelCol:{span:4},wrapperCol:{span:20},children:(0,t.jsx)(d.Z.Item,{label:"".concat(g("choose")," agent"),name:"agent_name",required:!0,rules:[{required:!0,message:g("please_choose")+" agent"}],children:(0,t.jsx)(h,{agents:(null==C?void 0:null===(l=C[0])||void 0===l?void 0:l[1])||[],selectedTab:Z,setSelectedTab:y})})}),null==C?void 0:null===(a=C[0])||void 0===a?void 0:null===(s=a[1])||void 0===s?void 0:s.map(e=>(0,t.jsx)(f.default,{classNames:e.name===Z?"block":"hidden",updateData:e=>{N.current=N.current.map(l=>l.agent_name===(null==e?void 0:e.agent_name)?{...l,...e}:{...l}),o([V,N.current.filter(e=>null==w?void 0:w.includes(e.agent_name))])},initValue:i,name:e.name,modelStrategyOptions:I,resourceTypeOptions:S,promptList:(null==q?void 0:q.items)||[]},e.name))]})}},90334:function(e,l,a){"use strict";a.r(l);var t=a(85893),n=a(60778),s=a(48218),r=a(6171),i=a(86548),o=a(65654),d=a(36447),u=a(74330),c=a(42075),m=a(77683),p=a(93967),v=a.n(p),x=a(11163),_=a(67294),f=a(67421),h=a(37082),g=a(91183),b=a(76054),j=a(82257),w=a(78174),Z=a(11118),y=a.n(Z);l.default=()=>{var e;let l=JSON.parse(localStorage.getItem("new_app_info")||"{}"),{t:a}=(0,f.$G)(),{message:p}=d.Z.useApp(),Z=(0,x.useRouter)(),[N,k]=(0,_.useState)(!1),[C,V]=(0,_.useState)(!1),q=(0,_.useRef)({}),{run:I,loading:S}=(0,o.Z)(async e=>await (0,n.Vx)((0,n.KT)({app_code:null==l?void 0:l.app_code,app_describe:null==l?void 0:l.app_describe,team_mode:null==l?void 0:l.team_mode,app_name:null==l?void 0:l.app_name,language:null==l?void 0:l.language,...e})),{manual:!0,onSuccess:e=>{let[,l]=e;l?(p.success(a("update_success")),Z.replace("/construct/app")):p.error(a("update_failed"))}}),E=async()=>{await I({...q.current})},F=(0,_.useMemo)(()=>(null==l?void 0:l.team_mode)==="awel_layout"?"px-6":(null==l?void 0:l.team_mode)==="auto_plan"?"w-3/4 mx-auto":"w-3/5 mx-auto",[null==l?void 0:l.team_mode]);return(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(u.Z,{spinning:N,children:(0,t.jsxs)("div",{className:v()("flex flex-col  h-screen w-screen dark:bg-gradient-dark bg-gradient-light bg-cover bg-center",y()["extra-container"]),children:[(0,t.jsxs)("header",{className:"flex items-center justify-between px-6 py-2 h-14 border-b border-[#edeeef]",children:[(0,t.jsxs)(c.Z,{className:"flex items-center",children:[(0,t.jsx)(r.Z,{className:"text-base cursor-pointer hover:text-[#0c75fc]",onClick:()=>{Z.replace("/construct/app")}}),(0,t.jsx)("div",{className:"flex items-center justify-center w-10 h-10 border border-[#d6d8da] rounded-lg",children:(0,t.jsx)(s.Z,{scene:(null==l?void 0:null===(e=l.team_context)||void 0===e?void 0:e.chat_scene)||"chat_agent"})}),(0,t.jsx)("span",{children:null==l?void 0:l.app_name}),(0,t.jsx)(i.Z,{className:"cursor-pointer hover:text-[#0c75fc]",onClick:()=>V(!0)})]}),(0,t.jsx)(m.ZP,{type:"primary",onClick:E,loading:S,children:(null==l?void 0:l.isEdit)?a("update"):a("save")})]}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col py-12 max-h-full overflow-y-auto",children:[["single_agent","auto_plan"].includes(null==l?void 0:l.team_mode)&&(0,t.jsx)(w.default,{classNames:"w-3/4 mx-auto",updateData:e=>{k(null==e?void 0:e[0]),q.current.details=null==e?void 0:e[1]},initValue:null==l?void 0:l.details}),(null==l?void 0:l.team_mode)==="awel_layout"&&(0,t.jsx)(g.default,{initValue:null==l?void 0:l.team_context,updateData:e=>{k(null==e?void 0:e[0]),q.current.team_context=null==e?void 0:e[1]},classNames:"px-6"}),(null==l?void 0:l.team_mode)==="native_app"&&(0,t.jsx)(b.default,{initValue:{team_context:null==l?void 0:l.team_context,param_need:null==l?void 0:l.param_need},classNames:"w-3/5 mx-auto",updateData:e=>{var l,a;k(null==e?void 0:e[0]),q.current.team_context=null==e?void 0:null===(l=e[1])||void 0===l?void 0:l[0],q.current.param_need=null==e?void 0:null===(a=e[1])||void 0===a?void 0:a[1]}}),(0,t.jsx)(j.default,{updateData:e=>{q.current.recommend_questions=e},classNames:F,initValue:null==l?void 0:l.recommend_questions,labelCol:(null==l?void 0:l.team_mode)!=="awel_layout"})]})]})}),(0,t.jsx)(h.default,{type:"edit",open:C,onCancel:()=>V(!1)})]})}},79903:function(e){e.exports={"create-app-modal-container":"styles_create-app-modal-container___tIEs"}},11118:function(e){e.exports={"extra-container":"styles_extra-container__OYZKD","recommend-questions-container":"styles_recommend-questions-container__Zjnkd"}}},function(e){e.O(0,[3662,1265,7034,8241,1449,8289,3791,5217,4330,8791,5593,3886,4435,6877,8591,9859,4567,2398,1004,5265,7426,3627,4866,9685,7327,9924,6520,5789,8051,7451,9774,2888,179],function(){return e(e.s=74294)}),_N_E=e.O()}]);