(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5550],{91321:function(e,l,t){"use strict";t.d(l,{Z:function(){return s}});var n=t(87462),i=t(45987),a=t(67294),r=t(16165),u=["type","children"],o=new Set;function c(e){var l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=e[l];if("string"==typeof t&&t.length&&!o.has(t)){var n=document.createElement("script");n.setAttribute("src",t),n.setAttribute("data-namespace",t),e.length>l+1&&(n.onload=function(){c(e,l+1)},n.onerror=function(){c(e,l+1)}),o.add(t),document.body.appendChild(n)}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},l=e.scriptUrl,t=e.extraCommonProps,o=void 0===t?{}:t;l&&"undefined"!=typeof document&&"undefined"!=typeof window&&"function"==typeof document.createElement&&(Array.isArray(l)?c(l.reverse()):c([l]));var s=a.forwardRef(function(e,l){var t=e.type,c=e.children,s=(0,i.Z)(e,u),d=null;return e.type&&(d=a.createElement("use",{xlinkHref:"#".concat(t)})),c&&(d=c),a.createElement(r.Z,(0,n.Z)({},o,s,{ref:l}),d)});return s.displayName="Iconfont",s}},48689:function(e,l,t){"use strict";t.d(l,{Z:function(){return u}});var n=t(87462),i=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},r=t(84089),u=i.forwardRef(function(e,l){return i.createElement(r.Z,(0,n.Z)({},e,{ref:l,icon:a}))})},26911:function(e,l,t){"use strict";t.d(l,{Z:function(){return u}});var n=t(87462),i=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494z"}}]},name:"file",theme:"outlined"},r=t(84089),u=i.forwardRef(function(e,l){return i.createElement(r.Z,(0,n.Z)({},e,{ref:l,icon:a}))})},32319:function(e,l,t){"use strict";t.d(l,{Z:function(){return u}});var n=t(87462),i=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 298.4H521L403.7 186.2a8.15 8.15 0 00-5.5-2.2H144c-17.7 0-32 14.3-32 32v592c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V330.4c0-17.7-14.3-32-32-32zM840 768H184V256h188.5l119.6 114.4H840V768z"}}]},name:"folder",theme:"outlined"},r=t(84089),u=i.forwardRef(function(e,l){return i.createElement(r.Z,(0,n.Z)({},e,{ref:l,icon:a}))})},24969:function(e,l,t){"use strict";t.d(l,{Z:function(){return u}});var n=t(87462),i=t(67294),a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M192 474h672q8 0 8 8v60q0 8-8 8H160q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},r=t(84089),u=i.forwardRef(function(e,l){return i.createElement(r.Z,(0,n.Z)({},e,{ref:l,icon:a}))})},45128:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/construct/app/extra/components/auto-plan/ResourcesCard",function(){return t(49264)}])},70065:function(e,l,t){"use strict";var n=t(91321);let i=(0,n.Z)({scriptUrl:"//at.alicdn.com/t/a/font_4440880_ljyggdw605.js"});l.Z=i},2856:function(e,l,t){"use strict";t.r(l);var n=t(85893),i=t(60778),a=t(65654),r=t(99859),u=t(65217),o=t(72269),c=t(93967),s=t.n(c),d=t(67294),f=t(67421);l.default=e=>{let{uid:l,initValue:t,updateData:c,classNames:v,resourceTypeOptions:m,setCurIcon:h}=e,[p]=r.Z.useForm(),x=r.Z.useWatch("type",p),g=r.Z.useWatch("is_dynamic",p),Z=r.Z.useWatch("value",p),{t:j}=(0,f.$G)(),y=(0,d.useMemo)(()=>(null==m?void 0:m.filter(e=>"all"!==e.value))||[],[m]),{run:w,data:_,loading:b}=(0,a.Z)(async e=>{var l;let[,n]=await (0,i.Vx)((0,i.RX)({type:e}));return p.setFieldsValue({value:(null==t?void 0:t.value)||(null==n?void 0:null===(l=n[0])||void 0===l?void 0:l.key)}),n||[]},{manual:!0});(0,d.useEffect)(()=>{x&&w(x)},[w,x]);let N=(0,d.useMemo)(()=>(null==_?void 0:_.map(e=>({...e,label:e.label,value:e.key+""})))||[],[_]);return(0,d.useEffect)(()=>{let e=p.getFieldsValue(),t=(null==e?void 0:e.is_dynamic)?"":null==e?void 0:e.value;c({uid:l,...e,value:t})},[l,g,p,c,Z,x]),(0,n.jsx)("div",{className:s()("flex flex-1",v),children:(0,n.jsxs)(r.Z,{style:{width:"100%"},form:p,labelCol:{span:4},initialValues:{...t},children:[(0,n.jsx)(r.Z.Item,{label:j("resource_type"),name:"type",children:(0,n.jsx)(u.default,{className:"w-2/5",options:y,onChange:e=>{h({uid:l,icon:e})}})}),(0,n.jsx)(r.Z.Item,{label:j("resource_dynamic"),name:"is_dynamic",children:(0,n.jsx)(o.Z,{style:{background:g?"#1677ff":"#ccc"}})}),!g&&(0,n.jsxs)(n.Fragment,{children:[" ","image_file"===x||"internet"===x||["text_file","excel_file"].includes(x)?null:(0,n.jsx)(r.Z.Item,{label:j("resource_value"),name:"value",required:!0,children:(0,n.jsx)(u.default,{placeholder:j("please_select_param"),options:N,loading:b,className:"w-3/5",allowClear:!0})})]})]})})}},49264:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return j}});var n=t(85893),i=t(32983),a=t(93967),r=t.n(a),u=e=>{let{className:l,imgUrl:t="/pictures/empty.png"}=e;return(0,n.jsx)("div",{className:r()("m-auto",{className:l}),children:(0,n.jsx)(i.Z,{image:t,imageStyle:{margin:"0 auto",width:"100%",height:"100%"}})})},o=t(48689),c=t(24969),s=t(65217),d=t(25593),f=t(86738),v=t(77683),m=t(96486),h=t(67294),p=t(67421),x=t(57632),g=t(83072),Z=t(2856),j=e=>{var l;let{name:t,updateData:i,resourceTypeOptions:a,initValue:j}=e,{t:y}=(0,p.$G)(),w=(0,h.useRef)(j||[]),[_,b]=(0,h.useState)({uid:"",icon:""}),[N,E]=(0,h.useState)((null==j?void 0:j.map(e=>({...e,icon:e.type,initVal:e})))||[]),[C,k]=(0,h.useState)([...N]),[V,z]=(0,h.useState)((null==N?void 0:null===(l=N[0])||void 0===l?void 0:l.uid)||""),[H,M]=(0,h.useState)(""),S=(e,l)=>{var n,a;null==e||e.stopPropagation();let r=null===(n=w.current)||void 0===n?void 0:n.findIndex(e=>e.uid===V),u=null==N?void 0:N.filter(e=>e.uid!==l.uid);w.current=w.current.filter(e=>e.uid!==l.uid)||[],i([t,w.current]),E(u),r===(null==N?void 0:N.length)-1&&0!==r&&setTimeout(()=>{var e;z((null==u?void 0:null===(e=u[u.length-1])||void 0===e?void 0:e.uid)||"")},0),z((null==u?void 0:null===(a=u[r])||void 0===a?void 0:a.uid)||"")};return(0,h.useEffect)(()=>{k([...N])},[N]),(0,h.useEffect)(()=>{E(N.map(e=>(null==_?void 0:_.uid)===e.uid?{...e,icon:_.icon}:e))},[_]),(0,n.jsxs)("div",{className:"flex flex-1  h-64 px-3 py-4 border border-[#d6d8da] rounded-md",children:[(0,n.jsxs)("div",{className:"flex flex-col w-40 h-full",children:[(0,n.jsx)(s.default,{options:a,className:"w-full h-8",variant:"borderless",defaultValue:"all",onChange:e=>{var l,t;if("all"===e)k(N),z((null==N?void 0:null===(l=N[0])||void 0===l?void 0:l.uid)||"");else{let l=null==N?void 0:N.filter(l=>(null==l?void 0:l.icon)===e);z((null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.uid)||""),k(l)}}}),(0,n.jsx)("div",{className:"flex flex-1 flex-col gap-1 overflow-y-auto",children:null==C?void 0:C.map(e=>(0,n.jsxs)("div",{className:r()("flex h-8 items-center px-3 pl-[0.6rem] rounded-md hover:bg-[#f5faff] hover:dark:bg-[#606264] cursor-pointer relative",{"bg-[#f5faff] dark:bg-[#606264]":e.uid===V}),onClick:()=>{z(e.uid||"")},onMouseEnter:()=>{M(e.uid||"")},onMouseLeave:()=>{M("")},children:[g.resourceTypeIcon[e.icon||""],(0,n.jsx)(d.Z.Text,{className:r()("flex flex-1 items-center text-sm p-0 m-0 mx-2 line-clamp-1",{"text-[#0c75fc]":e.uid===V}),editable:{autoSize:{maxRows:1},onChange:l=>{E(N.map(t=>t.uid===e.uid?{...t,name:l}:t)),w.current=w.current.map(t=>t.uid===e.uid?{...t,name:l}:t),i([t,w.current])}},ellipsis:{tooltip:!0},children:e.name}),(0,n.jsx)(f.Z,{title:y("want_delete"),onConfirm:l=>{S(l,e)},onCancel:e=>null==e?void 0:e.stopPropagation(),children:(0,n.jsx)(o.Z,{className:"text-sm cursor-pointer  absolute right-2 ".concat(H===e.uid?"opacity-100":"opacity-0"),style:{top:"50%",transform:"translateY(-50%)"},onClick:e=>e.stopPropagation()})})]},e.uid))}),(0,n.jsx)(v.ZP,{className:"w-full h-8",type:"dashed",block:!0,icon:(0,n.jsx)(c.Z,{}),onClick:()=>{var e,l;let n=(0,x.Z)();w.current=(0,m.concat)(w.current,[{is_dynamic:!1,type:null===(e=null==a?void 0:a.filter(e=>"all"!==e.value))||void 0===e?void 0:e[0].value,value:"",uid:n,name:y("resource")+" ".concat(w.current.length+1)}].filter(Boolean)),i([t,w.current]),E(e=>{var l,t,i;return[...e,{icon:(null===(l=null==a?void 0:a.filter(e=>"all"!==e.value))||void 0===l?void 0:null===(t=l[0])||void 0===t?void 0:t.value)||"",uid:n,initVal:{is_dynamic:!1,type:null===(i=null==a?void 0:a.filter(e=>"all"!==e.value))||void 0===i?void 0:i[0].value,value:"",uid:n,name:y("resource")+" ".concat(e.length+1)},name:y("resource")+" ".concat(e.length+1)}]}),z(n),b({uid:n,icon:null===(l=null==a?void 0:a.filter(e=>"all"!==e.value))||void 0===l?void 0:l[0].value})},children:y("add_resource")})]}),(0,n.jsx)("div",{className:"flex flex-1 ml-6 ",children:C&&(null==C?void 0:C.length)>0?(0,n.jsx)("div",{className:"flex flex-1",children:null==C?void 0:C.map(e=>(0,n.jsx)(Z.default,{classNames:e.uid===V?"block":"hidden",resourceTypeOptions:a,initValue:e.initVal,setCurIcon:b,updateData:e=>{var l;w.current=null===(l=w.current)||void 0===l?void 0:l.map(l=>(null==l?void 0:l.uid)===(null==e?void 0:e.uid)?{...l,...e}:l),i([t,w.current])},uid:e.uid||""},e.uid))}):(0,n.jsx)(u,{className:"w-40 h-40"})})]})}},83072:function(e,l,t){"use strict";t.r(l),t.d(l,{agentIcon:function(){return j},resourceTypeIcon:function(){return y}});var n=t(85893),i=t(70065),a=t(89035),r=t(48869),u=t(61086),o=t(57132),c=t(97879),s=t(32319),d=t(79383),f=t(13520),v=t(14079),m=t(10524),h=t(56466),p=t(26911),x=t(97175),g=t(16801),Z=t(13179);t(67294);let j={CodeEngineer:(0,n.jsx)(a.Z,{}),Reporter:(0,n.jsx)(r.Z,{}),DataScientist:(0,n.jsx)(u.Z,{}),Summarizer:(0,n.jsx)(o.Z,{}),ToolExpert:(0,n.jsx)(i.Z,{type:"icon-plugin",style:{fontSize:17.25,marginTop:2}}),Indicator:(0,n.jsx)(c.Z,{}),Dbass:(0,n.jsx)(s.Z,{})},y={all:(0,n.jsx)(d.Z,{}),database:(0,n.jsx)(f.Z,{}),knowledge:(0,n.jsx)(v.Z,{}),internet:(0,n.jsx)(m.Z,{}),plugin:(0,n.jsx)(h.Z,{}),text_file:(0,n.jsx)(p.Z,{}),excel_file:(0,n.jsx)(x.Z,{}),image_file:(0,n.jsx)(g.Z,{}),awel_flow:(0,n.jsx)(Z.Z,{})};l.default=()=>(0,n.jsx)(n.Fragment,{})}},function(e){e.O(0,[3662,1449,3791,5217,5593,9859,7327,9774,2888,179],function(){return e(e.s=45128)}),_N_E=e.O()}]);